---
description:
globs:
alwaysApply: true
---
# Rule: Memory Bank Core (Always Active)

## Description

Checks for the existence of the `memory-bank/` directory and the core Memory Bank files created during initialization. Reads the files if present and maintains the `memory_bank_status` variable.

## Core Files Checked

- `memory-bank/productContext.md`
- `memory-bank/activeContext.md`
- `memory-bank/progress.md`
- `memory-bank/decisionLog.md`
- `memory-bank/systemPatterns.md`

## Flow Diagram

```mermaid
flowchart TD
    Start([Start]) --> CheckMB{`memory-bank/` directory exists AND contains ALL core files listed above?}

    CheckMB -->|No| SetInactive[Set memory_bank_status='inactive']
    CheckMB -->|Yes| SetActive[Set memory_bank_status='active']

    SetActive --> ReadFiles[Read ALL files in memory-bank/ path]
    ReadFiles --> LoadUpdateRule[Load memory-bank-update.mdc rule]
    LoadUpdateRule --> LoadProgressRule[Load memory-bank-progress.mdc rule]
    LoadProgressRule --> Done

    SetInactive --> CheckInit{User wants Memory bank OR task is complex?}
    CheckInit -->|Yes| LoadInitRule[Load memory-bank-init.mdc rule]
    CheckInit -->|No| Done
    LoadInitRule --> Done([Done])
```

## Status

- This rule sets `memory_bank_status` ('active' or 'inactive')
- Subsequent responses should reflect this (e.g., `[MEMORY BANK: {memory_bank_status}]...`)
